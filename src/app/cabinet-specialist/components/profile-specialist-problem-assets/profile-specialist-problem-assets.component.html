<div class="page-wrapper">

    <!-- Header -->
    <app-header></app-header>

    <div class="container">
        <div class="content-wrapper">
            <profile-specialist-sidebar></profile-specialist-sidebar>

            <content>
                <div class="page-top">
                    <div class="page-info">
                        <div class="button-back">
                            <button class="button-transparent">
                                <div class="icon">
                                    <img src="../../../../assets/images/icon-arrow-left.svg">
                                </div>
    
                                Назад
                            </button>
                        </div>
    
                        <div class="client-name" *ngIf="client">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="10" cy="6" r="3" stroke="#ADBDC0"/>
                                <path d="M3 16C3 13.2386 5.23858 11 8 11H12C14.7614 11 17 13.2386 17 16V16C17 16.5523 16.5523 17 16 17H4C3.44772 17 3 16.5523 3 16V16Z" stroke="#ADBDC0"/>
                            </svg>
                                                 
                            {{ client.user.firstName }} {{ client.user.lastName }}
                        </div>
                    </div>

                    <div class="page-head">
                        <div class="problem-text" *ngIf="assets">
                            {{ assets.problem.problemText }}
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="tabs" *ngIf="assets">
                        <div class="tabs-head">
                            <div class="tab-head" [ngClass]="{'active': activeTab == 1}" (click)="setActiveTab(1)">
                                <div class="title">
                                    Образов
                                </div>

                                <div class="count">
                                    {{ assets.images.length }}
                                </div>
                            </div>

                            <div class="tab-head" [ngClass]="{'active': activeTab == 2}" (click)="setActiveTab(2)">
                                <div class="title">
                                    Ресурсов
                                </div>

                                <div class="count">
                                    {{ assets.resources.length }}
                                </div>
                            </div>

                            <div class="tab-head" [ngClass]="{'active': activeTab == 3}" (click)="setActiveTab(3)">
                                <div class="title">
                                    Сессий
                                </div>

                                <div class="count">
                                    {{ assets.sessions.length }}
                                </div>
                            </div>
                        </div>

                        <div class="tabs-content">
                            <div class="tab-content" *ngIf="activeTab == 1">
                                <div class="images-list">
                                    <ng-container *ngFor="let image of assets.images">
                                        <div class="images-list-item" *ngIf="editImageForm.value['id'] != image.id" [ngClass]="{'hidden-image': image.isHidden}">
                                            <div class="item-head">
                                                <div class="item-title">
                                                    <div class="item-date">
                                                        <div class="day">{{ image.session.date | date: 'dd' }}</div>
                                                        <div class="month">{{ normalizeMonth(image.session.date | date: 'MMM') }}</div>
                                                    </div>
    
                                                    <div class="item-name">
                                                        <div class="title hidden-image-title">
                                                            Образ убран
                                                        </div>
    
                                                        <div class="name">
                                                            {{ image.title }}
                                                        </div>
                                                        
                                                        <div class="like-score">
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 0}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 1}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 2}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 3}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 4}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 5}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 6}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 7}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 8}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': image.likeScore > 9}"></div>
                                                        </div>
                                                    </div>
    
                                                    <div class="item-specialist">
                                                        <div class="specialist-photo">
                                                            <img [src]="image.session.specialist.photo.url" />
                                                        </div>
    
                                                        <div class="specialist-name">
                                                            {{ image.session.specialist.user.firstName }} {{ image.session.specialist.user.lastName }}
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="item-actions">
                                                    <div class="item-edit">
                                                        <div class="button-edit">
                                                            <button (click)="editProblemImage(image)">
                                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3191 7.62235L12.3776 5.68091L4.17137 13.8872L3.29083 16.7092L6.11281 15.8286L14.3191 7.62235ZM15.0262 6.91525L13.0848 4.97381L15.0375 3.02107L16.9789 4.96251L15.0262 6.91525ZM17.722 5.63364C18.0927 5.26299 18.0927 4.66204 17.722 4.29138L15.7086 2.27799C15.338 1.90734 14.737 1.90734 14.3664 2.27799L3.35662 13.2877C3.27812 13.3662 3.22962 13.4698 3.21957 13.5803L2.002 17.4824C1.97517 17.7776 2.22243 18.0248 2.51757 17.998L6.41967 16.7804C6.53023 16.7704 6.63377 16.7219 6.71227 16.6434L17.722 5.63364Z" fill="#19A067"/>
                                                                </svg>                                                                
                                                            </button>
                                                        </div>
                                                    </div>
    
                                                    <div class="item-reload">
                                                        <div class="button-reload">
                                                            <button (click)="reloadProblemImage(image)">
                                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M6.19673 2H1V1H8V8H7V2.62247L4.68752 4.70282C1.76777 7.63249 1.77083 12.3744 4.6967 15.3002C7.62563 18.2292 12.3744 18.2292 15.3033 15.3002C18.2322 12.3713 18.2322 7.62256 15.3033 4.69362L16.0104 3.98652C19.3299 7.30597 19.3299 12.6879 16.0104 16.0073C12.691 19.3268 7.30905 19.3268 3.98959 16.0073C0.670136 12.6879 0.670136 7.30597 3.98959 3.98652L3.99893 3.97718L6.19673 2Z" fill="#C8B69D"/>
                                                                </svg>                                                                                                                            
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
    
                                            <div class="item-body">
                                                <div class="item-description">
                                                    <div class="item-description-row">
                                                        <div class="item-description-column text-column">
                                                            <div class="column-title">
                                                                Эмоция / Чувство
                                                            </div>
    
                                                            <div class="column-value">
                                                                {{ image.emotion }}
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column text-column">
                                                            <div class="column-title">
                                                                Расположение
                                                            </div>
    
                                                            <div class="column-value">
                                                                {{ image.location }}
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column text-column">
                                                            <div class="column-title">
                                                                Характеристики
                                                            </div>
    
                                                            <div class="column-value">
                                                                {{ image.characteristic }}
                                                            </div>
                                                        </div>
                                                    </div>
    
                                                    <div class="item-description-row">
                                                        <div class="item-description-column checkbox-column">
                                                            <div class="column-title">
                                                                Моё
                                                            </div>
    
                                                            <div class="column-value">
                                                                <svg *ngIf="image.isMine" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <g clip-path="url(#clip0)">
                                                                        <path d="M6.12669 13.9774C5.97396 14.131 5.76558 14.2167 5.54913 14.2167C5.33267 14.2167 5.1243 14.131 4.97157 13.9774L0.359012 9.36408C-0.119671 8.8854 -0.119671 8.10919 0.359012 7.6314L0.936573 7.05369C1.4154 6.57501 2.19072 6.57501 2.6694 7.05369L5.54913 9.93357L13.3306 2.15198C13.8094 1.6733 14.5855 1.6733 15.0634 2.15198L15.641 2.72969C16.1196 3.20837 16.1196 3.98444 15.641 4.46237L6.12669 13.9774Z" fill="#389A71"/>
                                                                    </g>
    
                                                                    <defs>
                                                                        <clipPath id="clip0">
                                                                            <rect width="16" height="16" fill="white"/>
                                                                        </clipPath>
                                                                    </defs>
                                                                </svg>
    
                                                                <svg *ngIf="!image.isMine" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M8 0C3.58887 0 0 3.58887 0 8C0 12.4111 3.58887 16 8 16C12.4111 16 16 12.4111 16 8C16 3.58887 12.4111 0 8 0ZM8 14C4.69172 14 2 11.3083 2 8C2 6.73731 2.38281 5.54362 3.11069 4.52506L11.4749 12.8893C10.4564 13.6172 9.26269 14 8 14ZM12.8893 11.4749L4.52506 3.11069C5.54362 2.38281 6.73731 2 8 2C11.3083 2 14 4.69172 14 8C14 9.26269 13.6172 10.4564 12.8893 11.4749Z" fill="#B6C5BC"/>
                                                                </svg>
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column checkbox-column">
                                                            <div class="column-title">
                                                                Я сделал
                                                            </div>
    
                                                            <div class="column-value">
                                                                <svg *ngIf="image.isIDo" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <g clip-path="url(#clip0)">
                                                                        <path d="M6.12669 13.9774C5.97396 14.131 5.76558 14.2167 5.54913 14.2167C5.33267 14.2167 5.1243 14.131 4.97157 13.9774L0.359012 9.36408C-0.119671 8.8854 -0.119671 8.10919 0.359012 7.6314L0.936573 7.05369C1.4154 6.57501 2.19072 6.57501 2.6694 7.05369L5.54913 9.93357L13.3306 2.15198C13.8094 1.6733 14.5855 1.6733 15.0634 2.15198L15.641 2.72969C16.1196 3.20837 16.1196 3.98444 15.641 4.46237L6.12669 13.9774Z" fill="#389A71"/>
                                                                    </g>
    
                                                                    <defs>
                                                                        <clipPath id="clip0">
                                                                            <rect width="16" height="16" fill="white"/>
                                                                        </clipPath>
                                                                    </defs>
                                                                </svg>
    
                                                                <svg *ngIf="!image.isIDo" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M8 0C3.58887 0 0 3.58887 0 8C0 12.4111 3.58887 16 8 16C12.4111 16 16 12.4111 16 8C16 3.58887 12.4111 0 8 0ZM8 14C4.69172 14 2 11.3083 2 8C2 6.73731 2.38281 5.54362 3.11069 4.52506L11.4749 12.8893C10.4564 13.6172 9.26269 14 8 14ZM12.8893 11.4749L4.52506 3.11069C5.54362 2.38281 6.73731 2 8 2C11.3083 2 14 4.69172 14 8C14 9.26269 13.6172 10.4564 12.8893 11.4749Z" fill="#B6C5BC"/>
                                                                </svg>                                                            
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column checkbox-column">
                                                            <div class="column-title">
                                                                Пусть будет всегда
                                                            </div>
    
                                                            <div class="column-value">
                                                                <svg *ngIf="image.isForever" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <g clip-path="url(#clip0)">
                                                                        <path d="M6.12669 13.9774C5.97396 14.131 5.76558 14.2167 5.54913 14.2167C5.33267 14.2167 5.1243 14.131 4.97157 13.9774L0.359012 9.36408C-0.119671 8.8854 -0.119671 8.10919 0.359012 7.6314L0.936573 7.05369C1.4154 6.57501 2.19072 6.57501 2.6694 7.05369L5.54913 9.93357L13.3306 2.15198C13.8094 1.6733 14.5855 1.6733 15.0634 2.15198L15.641 2.72969C16.1196 3.20837 16.1196 3.98444 15.641 4.46237L6.12669 13.9774Z" fill="#389A71"/>
                                                                    </g>
    
                                                                    <defs>
                                                                        <clipPath id="clip0">
                                                                            <rect width="16" height="16" fill="white"/>
                                                                        </clipPath>
                                                                    </defs>
                                                                </svg>
    
                                                                <svg *ngIf="!image.isForever" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M8 0C3.58887 0 0 3.58887 0 8C0 12.4111 3.58887 16 8 16C12.4111 16 16 12.4111 16 8C16 3.58887 12.4111 0 8 0ZM8 14C4.69172 14 2 11.3083 2 8C2 6.73731 2.38281 5.54362 3.11069 4.52506L11.4749 12.8893C10.4564 13.6172 9.26269 14 8 14ZM12.8893 11.4749L4.52506 3.11069C5.54362 2.38281 6.73731 2 8 2C11.3083 2 14 4.69172 14 8C14 9.26269 13.6172 10.4564 12.8893 11.4749Z" fill="#B6C5BC"/>
                                                                </svg>                                                            
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column button-column" *ngIf="!image.parentImage || image.parentImage.isHidden">
                                                            <div class="column-value">
                                                                <button class="button-green" (click)="hideProblemImage(image)">Убрать образ</button>
                                                            </div>
                                                        </div>
    
                                                        <div class="item-description-column relation-column" *ngIf="image.parentImage && !image.parentImage.isHidden">
                                                            <div class="column-title">
                                                                Убрать
                                                            </div>
                                                            
                                                            <div class="column-value">
                                                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M8 0C3.58887 0 0 3.58887 0 8C0 12.4111 3.58887 16 8 16C12.4111 16 16 12.4111 16 8C16 3.58887 12.4111 0 8 0ZM8 14C4.69172 14 2 11.3083 2 8C2 6.73731 2.38281 5.54362 3.11069 4.52506L11.4749 12.8893C10.4564 13.6172 9.26269 14 8 14ZM12.8893 11.4749L4.52506 3.11069C5.54362 2.38281 6.73731 2 8 2C11.3083 2 14 4.69172 14 8C14 9.26269 13.6172 10.4564 12.8893 11.4749Z" fill="#B6C5BC"/>
                                                                </svg>
                                                                
                                                                <div class="related-image">
                                                                    Зависит от образа “{{ image.parentImage.title }}”
    
                                                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M10.9389 5.85205L7.81395 2.72706C7.73257 2.64567 7.60073 2.64567 7.51936 2.72706C7.43798 2.80844 7.43798 2.94028 7.51936 3.02164L10.2887 5.79102H1.20834C1.09318 5.79102 1 5.8842 1 5.99936C1 6.11451 1.09318 6.20769 1.20834 6.20769H10.2887L7.51936 8.97705C7.43798 9.05843 7.43798 9.19027 7.51936 9.27163C7.56005 9.31232 7.61337 9.33267 7.66667 9.33267C7.71997 9.33267 7.77327 9.31232 7.81397 9.27163L10.939 6.14664C11.0203 6.06527 11.0203 5.93344 10.9389 5.85205Z" fill="#B6C5BC" stroke="#B6C5BC" stroke-width="0.5"/>
                                                                    </svg>
                                                                </div>                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="images-list-item create-item-form" *ngIf="editImageForm.value['id'] && editImageForm.value['id'] == image.id">
                                            <div class="item-head">
                                                <div class="item-title">
                                                    <div class="item-add-icon">
                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3191 7.62235L12.3776 5.68091L4.17137 13.8872L3.29083 16.7092L6.11281 15.8286L14.3191 7.62235ZM15.0262 6.91525L13.0848 4.97381L15.0375 3.02107L16.9789 4.96251L15.0262 6.91525ZM17.722 5.63364C18.0927 5.26299 18.0927 4.66204 17.722 4.29138L15.7086 2.27799C15.338 1.90734 14.737 1.90734 14.3664 2.27799L3.35662 13.2877C3.27812 13.3662 3.22962 13.4698 3.21957 13.5803L2.002 17.4824C1.97517 17.7776 2.22243 18.0248 2.51757 17.998L6.41967 16.7804C6.53023 16.7704 6.63377 16.7219 6.71227 16.6434L17.722 5.63364Z" fill="#19A067"/>
                                                        </svg>                                                        
                                                    </div>
    
                                                    <div class="item-name">
                                                        <div class="name">
                                                            {{ getImage(editImageForm.value['id']).title }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
    
                                            <div class="item-body">
                                                <div class="create-item-form">
                                                    <form [formGroup]="editImageForm" (ngSubmit)="submitEditProblemImage(editImageForm)">
                                                        <div class="form-inner">
                                                            <div class="form-block">
                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="title" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Название образа</label>
                                                                    </div>
                                                                </div>
    
                                                                <div class="form-group form-group-half">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="emotion" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Эмоция/чувство</label>
                                                                    </div>
    
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="location" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Расположение</label>
                                                                    </div>
                                                                </div>
    
                                                                <div class="form-group form-group-checkbox">
                                                                    <div class="input-wrapper">
                                                                        <label>Моё</label>
                                                                        <input class="apple-switch" type="checkbox" formControlName="isMine" />
                                                                    </div>
    
                                                                    <div class="input-wrapper">
                                                                        <label>Я сделал</label>
                                                                        <input class="apple-switch" type="checkbox" formControlName="isIDo" />
                                                                    </div>
    
                                                                    <div class="input-wrapper">
                                                                        <label>Будет всегда</label>
                                                                        <input class="apple-switch" type="checkbox" formControlName="isForever" />
                                                                    </div>
                                                                </div>
                                                            </div>
    
                                                            <div class="form-block">
                                                                <div class="form-group form-group-progress">
                                                                    <div class="input-wrapper">
                                                                        <label>
                                                                            <span>Нравится</span>
                                                                            <span>{{ editImageForm.value['likeScore'] }}/10</span>
                                                                        </label>
    
                                                                        <mat-slider formControlName="likeScore" min="0" max="10" step="1" value="2" tickInterval="1"></mat-slider>
                                                                    </div>
                                                                </div>
    
                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="characteristic" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Характеристики</label>
                                                                    </div>
                                                                </div>
    
                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <select required formControlName="parentImageID">
                                                                            <ng-container *ngFor="let image of assets.images | filterHiddenImages">
                                                                                <option *ngIf="image.id != editImageForm.value['id']" [value]="image.id">
                                                                                    {{ image.title }}
                                                                                </option>
                                                                            </ng-container>
                                                                        </select>
                                                                        
                                                                        <label>Зависимость</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
    
                                                        <div class="submit-block">
                                                            <button type="submit">Сохранить</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <div class="images-list-item create-item-form" *ngIf="createImageForm">
                                        <div class="item-head">
                                            <div class="item-title">
                                                <div class="item-add-icon">
                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.49998 9.5V3H10.5V9.5H17V10.5H10.5V17H9.49998V10.5H3V9.5H9.49998Z" fill="#19A067"/>
                                                    </svg>                                                        
                                                </div>

                                                <div class="item-name">
                                                    <div class="name">
                                                        Новый образ
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="item-body">
                                            <div class="create-item-form">
                                                <form [formGroup]="createImageForm" (ngSubmit)="submitCreateProblemImage(createImageForm)">
                                                    <div class="form-inner">
                                                        <div class="form-block">
                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="title" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Название образа</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group form-group-half">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="emotion" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Эмоция/чувство</label>
                                                                </div>

                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="location" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Расположение</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group form-group-checkbox">
                                                                <div class="input-wrapper">
                                                                    <label>Моё</label>
                                                                    <input class="apple-switch" type="checkbox" formControlName="isMine" />
                                                                </div>

                                                                <div class="input-wrapper">
                                                                    <label>Я сделал</label>
                                                                    <input class="apple-switch" type="checkbox" formControlName="isIDo" />
                                                                </div>

                                                                <div class="input-wrapper">
                                                                    <label>Будет всегда</label>
                                                                    <input class="apple-switch" type="checkbox" formControlName="isForever" />
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-block">
                                                            <div class="form-group form-group-progress">
                                                                <div class="input-wrapper">
                                                                    <label>
                                                                        <span>Нравится</span>
                                                                        <span>{{ createImageForm.value['likeScore'] }}/10</span>
                                                                    </label>

                                                                    <mat-slider formControlName="likeScore" min="0" max="10" step="1" value="2" tickInterval="1"></mat-slider>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="characteristic" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Характеристики</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <select required formControlName="parentImageID">
                                                                        <option *ngFor="let image of assets.images | filterHiddenImages" [value]="image.id">
                                                                            {{ image.title }}
                                                                        </option>
                                                                    </select>
                                                                    
                                                                    <label>Зависимость</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="submit-block">
                                                        <button type="submit">Добавить</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="new-item" *ngIf="!editImageForm.value['id']">
                                    <div class="new-item-button" (click)="createProblemImage()">
                                        <img src="../../../../assets/images/icon-plus.svg" />
                                    </div>
                                </div>
                            </div>

                            <div class="tab-content" *ngIf="activeTab == 2">
                                <div class="resources-list">
                                    <ng-container *ngFor="let resource of assets.resources">
                                        <div class="resources-list-item" *ngIf="editResourceForm.value['id'] != resource.id">
                                            <div class="item-head">
                                                <div class="item-title">
                                                    <div class="item-date">
                                                        <div class="day">{{ resource.session.date | date: 'dd' }}</div>
                                                        <div class="month">{{ normalizeMonth(resource.session.date | date: 'MMM') }}</div>
                                                    </div>
    
                                                    <div class="item-name">
                                                        <div class="name">
                                                            {{ resource.title }}
                                                        </div>
                                                        
                                                        <div class="like-score">
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 0}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 1}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 2}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 3}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 4}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 5}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 6}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 7}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 8}"></div>
                                                            <div class="like-score-section" [ngClass]="{'filled': resource.likeScore > 9}"></div>
                                                        </div>
                                                    </div>
    
                                                    <div class="item-specialist">
                                                        <div class="specialist-photo">
                                                            <img [src]="resource.session.specialist.photo.url" />
                                                        </div>
    
                                                        <div class="specialist-name">
                                                            {{ resource.session.specialist.user.firstName }} {{ resource.session.specialist.user.lastName }}
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="item-actions">
                                                    <div class="item-edit">
                                                        <div class="button-edit">
                                                            <button (click)="editProblemResource(resource)">
                                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3191 7.62235L12.3776 5.68091L4.17137 13.8872L3.29083 16.7092L6.11281 15.8286L14.3191 7.62235ZM15.0262 6.91525L13.0848 4.97381L15.0375 3.02107L16.9789 4.96251L15.0262 6.91525ZM17.722 5.63364C18.0927 5.26299 18.0927 4.66204 17.722 4.29138L15.7086 2.27799C15.338 1.90734 14.737 1.90734 14.3664 2.27799L3.35662 13.2877C3.27812 13.3662 3.22962 13.4698 3.21957 13.5803L2.002 17.4824C1.97517 17.7776 2.22243 18.0248 2.51757 17.998L6.41967 16.7804C6.53023 16.7704 6.63377 16.7219 6.71227 16.6434L17.722 5.63364Z" fill="#19A067"/>
                                                                </svg>                                                                
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item-body">
                                                <div class="item-description">
                                                    <div class="item-description-block">
                                                        <div class="item-description-row">
                                                            <div class="row-title">
                                                                Эмоция / Ресурс
                                                            </div>
                                                            
                                                            <div class="row-value">
                                                                {{ resource.emotion }}
                                                            </div>
                                                        </div>

                                                        <div class="item-description-row">
                                                            <div class="row-title">
                                                                Расположение
                                                            </div>
                                                            
                                                            <div class="row-value">
                                                                {{ resource.location }}
                                                            </div>
                                                        </div>

                                                        <div class="item-description-row">
                                                            <div class="row-title">
                                                                Характеристики
                                                            </div>
                                                            
                                                            <div class="row-value">
                                                                {{ resource.characteristic }}
                                                            </div>
                                                        </div>

                                                        <div class="item-description-row">
                                                            <div class="row-title">
                                                                На что влияет
                                                            </div>
                                                            
                                                            <div class="row-value">
                                                                {{ resource.influence }}
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="item-description-block">
                                                        <div class="item-description-row">
                                                            <div class="row-title">
                                                                Что хочется сделать
                                                            </div>
                                                            
                                                            <div class="row-value">
                                                                <div class="num-list">
                                                                    <div class="num-list-item" *ngFor="let task of resource.tasks; let index = index" [ngClass]="{'checked': task.isDone}">
                                                                        <div class="num-item-title">
                                                                            <div class="num-item-index">
                                                                                {{ index + 1 }}
                                                                            </div>
                                                                            
                                                                            {{ task.title }}
                                                                        </div>

                                                                        <div class="num-item-checked">
                                                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <g clip-path="url(#clip0)">
                                                                                    <path d="M5.77381 13.6245L5.77279 13.6256C5.71474 13.6839 5.63417 13.7177 5.54913 13.7177C5.46409 13.7177 5.38351 13.6839 5.32547 13.6256L5.32446 13.6246L0.711906 9.01125L0.711877 9.01122C0.427893 8.72723 0.42837 8.26724 0.711546 7.9846L0.711923 7.98422L1.28938 7.40661C1.28942 7.40658 1.28945 7.40654 1.28948 7.40651C1.57348 7.12271 2.03279 7.12282 2.31653 7.40655C2.31653 7.40655 2.31654 7.40655 2.31654 7.40656L5.19625 10.2864L5.54912 10.6393L5.902 10.2864L13.6834 2.5049C13.6834 2.50488 13.6834 2.50486 13.6834 2.50484C13.9676 2.22084 14.4275 2.22134 14.7103 2.50457L14.7105 2.5048L15.288 3.08251L15.2881 3.08256C15.572 3.36651 15.5716 3.82639 15.2884 4.10923L15.2881 4.10952L5.77381 13.6245Z" fill="#389A71" stroke="#389A71" stroke-width="0.998053"/>
                                                                                </g>

                                                                                <defs>
                                                                                    <clipPath id="clip0">
                                                                                        <rect width="16" height="16" fill="white"/>
                                                                                    </clipPath>
                                                                                </defs>
                                                                            </svg>                                                                                
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="resources-list-item create-item-form" *ngIf="editResourceForm.value['id'] && editResourceForm.value['id'] == resource.id">
                                            <div class="item-head">
                                                <div class="item-title">
                                                    <div class="item-add-icon">
                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3191 7.62235L12.3776 5.68091L4.17137 13.8872L3.29083 16.7092L6.11281 15.8286L14.3191 7.62235ZM15.0262 6.91525L13.0848 4.97381L15.0375 3.02107L16.9789 4.96251L15.0262 6.91525ZM17.722 5.63364C18.0927 5.26299 18.0927 4.66204 17.722 4.29138L15.7086 2.27799C15.338 1.90734 14.737 1.90734 14.3664 2.27799L3.35662 13.2877C3.27812 13.3662 3.22962 13.4698 3.21957 13.5803L2.002 17.4824C1.97517 17.7776 2.22243 18.0248 2.51757 17.998L6.41967 16.7804C6.53023 16.7704 6.63377 16.7219 6.71227 16.6434L17.722 5.63364Z" fill="#19A067"/>
                                                        </svg>                                                                                                         
                                                    </div>
    
                                                    <div class="item-name">
                                                        <div class="name">
                                                            {{ getResource(editResourceForm.value['id']).title }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item-body">
                                                <div class="create-item-form">
                                                    <form [formGroup]="editResourceForm" (ngSubmit)="submitEditResourceForm(editResourceForm)">
                                                        <div class="form-inner">
                                                            <div class="form-block">
                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="title" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Название ресурса</label>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group form-group-half">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="emotion" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Эмоция/чувство</label>
                                                                    </div>

                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="location" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Расположение</label>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="characteristic" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Характеристики</label>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" formControlName="influence" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">На что влияет</label>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="form-group form-group-progress">
                                                                    <div class="input-wrapper">
                                                                        <label>
                                                                            <span>Нравится</span>
                                                                            <span>{{ editResourceForm.value['likeScore'] }}/10</span>
                                                                        </label>
    
                                                                        <mat-slider formControlName="likeScore" min="0" max="10" step="1" tickInterval="1"></mat-slider>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-block">
                                                                <div class="form-group form-group-inline">
                                                                    <div class="input-wrapper">
                                                                        <input type="text" [(ngModel)]="createTaskInput" [ngModelOptions]="{standalone: true}" required />
                                                                        <label (click)="labelClick($event.target.previousSibling)">Что хочется сделать</label>
                                                                        
                                                                        <button type="button" class="inline-button" (click)="createResourceTask(true)">
                                                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.49998 9.5V3H10.5V9.5H17V10.5H10.5V17H9.49998V10.5H3V9.5H9.49998Z" fill="#19A067"/>
                                                                            </svg>                                                                                
                                                                        </button>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group form-group-list">
                                                                    <div class="num-list empty" *ngIf="!editResourceForm.value['tasks'].length">
                                                                        <div class="empty-list-message">
                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40005 1.79916C2.73141 1.79916 3.00004 2.06779 3.00004 2.39916V23.999H1.80005V2.39916C1.80005 2.06779 2.06868 1.79916 2.40005 1.79916Z" fill="#B6C5BC"/>
                                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6746 12.5999L14.7437 12.5585C16.3114 11.6203 17.962 11.0925 19.68 10.9079V2.40064C18.4301 2.42695 17.2103 2.83374 15.94 3.67108L14.8763 4.49649L14.0075 5.11545L13.9987 5.12153C12.1269 6.40516 9.96885 7.06568 7.8 7.21433V15.5507C9.56452 15.5826 11.369 15.0609 12.8466 14.0586L14.6746 12.5999ZM13.56 15.0246C11.64 16.3412 9.24001 16.9398 6.96003 16.7004H6.60001V6.04707H6.84002C9.12001 6.04707 11.4 5.4486 13.32 4.1319L14.16 3.5334L15.24 2.69541C17.04 1.49841 18.84 1.01967 20.76 1.25907H20.88V12.0321H21.1199C21.0799 12.0321 21.0399 12.0317 20.9999 12.0321C20.9599 12.0324 20.9199 12.0335 20.88 12.0343C20.4752 12.0418 20.0752 12.0686 19.68 12.1155C18.1704 12.2947 16.7304 12.768 15.36 13.5882L13.56 15.0246Z" fill="#B6C5BC"/>
                                                                            </svg>
                                                                            
                                                                            Пока не добавлено заданий
                                                                        </div>
                                                                    </div>

                                                                    <div class="num-list" *ngIf="editResourceForm.value['tasks'].length">
                                                                        <div class="num-list-item" *ngFor="let task of editResourceForm.value['tasks']; let index = index" (ngClass)="{'checked': task.isDone}">
                                                                            <div class="num-item-title">
                                                                                <div class="num-item-index">
                                                                                    {{ index + 1 }}
                                                                                </div>
                                                                                
                                                                                {{ task.title }}
                                                                            </div>

                                                                            <div class="num-list-item-checked">
                                                                                <div class="input-wrapper">
                                                                                    <input class="apple-switch" type="checkbox" [checked]="task.isDone" (click)="toggleTaskDone(task, true)" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="submit-block">
                                                            <button type="submit">Сохранить</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>

                                    <div class="resources-list-item create-item-form" *ngIf="createResourceForm">
                                        <div class="item-head">
                                            <div class="item-title">
                                                <div class="item-add-icon">
                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.49998 9.5V3H10.5V9.5H17V10.5H10.5V17H9.49998V10.5H3V9.5H9.49998Z" fill="#19A067"/>
                                                    </svg>                                                        
                                                </div>

                                                <div class="item-name">
                                                    <div class="name">
                                                        Новый ресурс
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="item-body">
                                            <div class="create-item-form">
                                                <form [formGroup]="createResourceForm" (ngSubmit)="submitCreateResourceForm(createResourceForm)">
                                                    <div class="form-inner">
                                                        <div class="form-block">
                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="title" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Название ресурса</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group form-group-half">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="emotion" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Эмоция/чувство</label>
                                                                </div>

                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="location" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Расположение</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="characteristic" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Характеристики</label>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="input-wrapper">
                                                                    <input type="text" formControlName="influence" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">На что влияет</label>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="form-group form-group-progress">
                                                                <div class="input-wrapper">
                                                                    <label>
                                                                        <span>Нравится</span>
                                                                        <span>{{ createResourceForm.value['likeScore'] }}/10</span>
                                                                    </label>

                                                                    <mat-slider formControlName="likeScore" min="0" max="10" step="1" tickInterval="1"></mat-slider>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-block">
                                                            <div class="form-group form-group-inline">
                                                                <div class="input-wrapper">
                                                                    <input type="text" [(ngModel)]="createTaskInput" [ngModelOptions]="{standalone: true}" required />
                                                                    <label (click)="labelClick($event.target.previousSibling)">Что хочется сделать</label>
                                                                    
                                                                    <button type="button" class="inline-button" (click)="createResourceTask()">
                                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.49998 9.5V3H10.5V9.5H17V10.5H10.5V17H9.49998V10.5H3V9.5H9.49998Z" fill="#19A067"/>
                                                                        </svg>                                                                                
                                                                    </button>
                                                                </div>
                                                            </div>

                                                            <div class="form-group form-group-list">
                                                                <div class="num-list empty" *ngIf="!createResourceForm.value['tasks'].length">
                                                                    <div class="empty-list-message">
                                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40005 1.79916C2.73141 1.79916 3.00004 2.06779 3.00004 2.39916V23.999H1.80005V2.39916C1.80005 2.06779 2.06868 1.79916 2.40005 1.79916Z" fill="#B6C5BC"/>
                                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6746 12.5999L14.7437 12.5585C16.3114 11.6203 17.962 11.0925 19.68 10.9079V2.40064C18.4301 2.42695 17.2103 2.83374 15.94 3.67108L14.8763 4.49649L14.0075 5.11545L13.9987 5.12153C12.1269 6.40516 9.96885 7.06568 7.8 7.21433V15.5507C9.56452 15.5826 11.369 15.0609 12.8466 14.0586L14.6746 12.5999ZM13.56 15.0246C11.64 16.3412 9.24001 16.9398 6.96003 16.7004H6.60001V6.04707H6.84002C9.12001 6.04707 11.4 5.4486 13.32 4.1319L14.16 3.5334L15.24 2.69541C17.04 1.49841 18.84 1.01967 20.76 1.25907H20.88V12.0321H21.1199C21.0799 12.0321 21.0399 12.0317 20.9999 12.0321C20.9599 12.0324 20.9199 12.0335 20.88 12.0343C20.4752 12.0418 20.0752 12.0686 19.68 12.1155C18.1704 12.2947 16.7304 12.768 15.36 13.5882L13.56 15.0246Z" fill="#B6C5BC"/>
                                                                        </svg>
                                                                        
                                                                        Пока не добавлено заданий
                                                                    </div>
                                                                </div>

                                                                <div class="num-list" *ngIf="createResourceForm.value['tasks'].length">
                                                                    <div class="num-list-item" *ngFor="let task of createResourceForm.value['tasks']; let index = index">
                                                                        <div class="num-item-title">
                                                                            <div class="num-item-index">
                                                                                {{ index + 1 }}
                                                                            </div>
                                                                            
                                                                            {{ task.title }}
                                                                        </div>

                                                                        <div class="num-list-item-checked">
                                                                            <div class="input-wrapper">
                                                                                <input class="apple-switch" type="checkbox" [value]="task.isDone"  (click)="toggleTaskDone(task)" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="submit-block">
                                                        <button type="submit">Добавить</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="new-item">
                                    <div class="new-item-button" (click)="createProblemResource()">
                                        <img src="../../../../assets/images/icon-plus.svg" />
                                    </div>
                                </div>
                            </div>

                            <div class="tab-content" *ngIf="activeTab == 3">
                                <div class="sessions-list">
                                    <div class="sessions-list-item" *ngFor="let session of assets.sessions">
                                        <div class="sessions-list-item-inner">

                                            <div class="item-title">
                                                <div class="item-date">
                                                    <div class="day">{{ session.sessionDate | date: 'dd' }}</div>
                                                    <div class="month">{{ normalizeMonth(session.sessionDate | date: 'MMM') }}</div>
                                                </div>

                                                <div class="item-specialist">
                                                    <div class="specialist-photo">
                                                        <img [src]="session.specialist.photo.url" />
                                                    </div>

                                                    <div class="specialist-name" [routerLink]="['/specialists', session.specialist.id]">
                                                        {{ session.specialist.user.firstName }} {{ session.specialist.user.lastName }}
                                                    </div>

                                                    <div class="specialist-rating">
                                                        <app-rating [score]="session.specialist.rating" [single]="true" [size]="18"></app-rating>

                                                        {{ session.specialist.rating }}
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item-rating">
                                                <div class="item-score">
                                                    <div class="title">
                                                        Оценка
                                                    </div>

                                                    <div class="score">
                                                        <app-review-score [score]="session.reviewScore"></app-review-score>
                                                    </div>
                                                </div>

                                                <div class="item-review">
                                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M3 2.5H13C13.5515 2.5 14 2.9485 14 3.5V9.5C14 10.0515 13.5515 10.5 13 10.5H12.5V12.7495C12.5 13.046 12.3328 13.307 12.0633 13.431C11.9613 13.478 11.854 13.5007 11.7477 13.5007C11.5732 13.5007 11.4015 13.4387 11.2615 13.3185C11.255 13.313 11.2485 13.3073 11.2422 13.3012L8.3 10.5H3C2.4485 10.5 2 10.0515 2 9.5V3.5C2 2.9485 2.4485 2.5 3 2.5ZM3 9.5H8.5C8.6285 9.5 8.75175 9.54925 8.84475 9.638L11.5 12.1657V10C11.5 9.724 11.724 9.5 12 9.5H13V3.5H3V9.5Z" fill="#89A195"/>
                                                    </svg>
                                                    
                                                    Отзыв
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </content>
        </div>
    </div>

    <!-- Footer -->
    <app-footer></app-footer>
</div>